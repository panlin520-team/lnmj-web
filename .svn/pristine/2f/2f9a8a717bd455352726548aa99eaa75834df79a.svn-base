<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>员工管理</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="${basePath!}/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="${basePath!}/css/index.css" media="all"/>
    <script src="${basePath!}/layui/layui.js" charset="utf-8"></script>
    <script src="${basePath!}/js/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="${basePath!}/assets/city-picker.data.js"></script>
    <script type="text/javascript" src="${basePath!}/assets/province.js"></script>
    <script src="${basePath!}/js/host.js" type="text/javascript"></script>
    <#include "../../baseFtl/pageAuth.ftl" />
    <style>
        .nore_time {
            background-color: #5A7C48;
            margin: 5px 8px 2px 2px;
            float: left;
            padding: 5px auto 5px auto;
            border-radius: 5px;
        }

        .tofree {
            background-color: #5A7C48;
        }

        .tobusy {
            background-color: #F58100;
        }

        .torest {
            background-color: #B2B2B2;
        }

        .resetLabel {
            width: 70px;
        }

        label.xrequired:before {
            content: '* ';
            color: red;
        }


    </style>
</head>
<body>

<div class="layui-fluid">
    <div class="demoTable layui-form">
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">请选择门店</label>
                <div class="layui-input-inline">
                    <select name="stores" id="stores" lay-filter="stores">
                    </select>
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label resetLabel">员工编号</label>
                <div class="layui-input-inline">
                    <input class="layui-input" type="text" name="keyWordStaffNumber" autocomplete="off"
                           placeholder="输入员工号码">
                </div>
                <label class="layui-form-label">名字</label>
                <div class="layui-input-inline">
                    <input class="layui-input" type="text" name="keyWordName" autocomplete="off" placeholder="输入名字">
                </div>
            </div>
            <div class="layui-inline">
                <button class="layui-btn" data-type="search"><i class="layui-icon layui-icon-search"></i></button>
            </div>
            <div class="layui-inline">
                <div class="layui-btn-group demoTable">
                    <button class="layui-btn" id="add">增加</button>
                </div>
            </div>
        </div>


    </div>
    <table id="beautician" lay-filter="demo"></table>
</div>

<script type="text/html" id="barDemo">
    <input type="checkbox" name="isXiaoshou" value="{{d.beauticianId}}" lay-skin="switch" lay-text="是销售员|不是销售员" lay-filter="isXiaoshou" {{ d.isSaleMan == 1 ? 'checked' : '' }}>
    <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
    <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
    <#--<a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="checkSalaryDetailed">查看员工工资信息</a>-->
    <#-- <a class="layui-btn layui-btn-xs" lay-event="addProjuects">授权</a>-->
    <#--<a class="layui-btn layui-btn-xs" lay-event="orderwork">排班</a>-->
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>


<#--选择要添加员工的类型表单-->
    <div id="employeeType" hidden="" class="layui-fluid layui-form-pane layui-personal" style="margin: 15px;">
        <form class="layui-form" action="" id="employeeType" lay-filter="employeeType">
            <div class="layui-form-item">
                <label class="layui-form-label">请选择商品类型</label>
                <div class="layui-input-block">
                    <input type="radio" name="employeeType" value="1" title="子公司员工" checked=""
                           lay-filter="employeeType">
                    <input type="radio" name="employeeType" value="2" title="门店员工" lay-filter="employeeType">
                </div>
            </div>

            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button class="layui-btn" lay-submit="" lay-filter="employeeTypeConfir">确认</button>
                </div>
            </div>

        </form>
    </div>


<#--选择要添加员工的类型表单-->
    <div id="employeeType" hidden="" class="layui-fluid layui-form-pane layui-personal" style="margin: 15px;">
        <form class="layui-form" action="" id="employeeType" lay-filter="employeeType">
            <div class="layui-form-item">
                <label class="layui-form-label">请选择商品类型</label>
                <div class="layui-input-block">
                    <input type="radio" name="employeeType"  value="1" title="子公司员工" checked="" lay-filter="employeeType">
                    <input type="radio" name="employeeType"  value="2" title="门店员工" lay-filter="employeeType">
                </div>
            </div>

            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button class="layui-btn" lay-submit="" lay-filter="employeeTypeConfir">确认</button>
                </div>
            </div>

        </form>
    </div>


<#--点击添加后的表单-->
<div id="addformdivid" hidden="" class="layui-fluid" style="margin: 15px;">
    <form class="layui-form layui-form-pane layui-personal" action="" id="addeditformid">

        <div class="layui-form-item" hidden="true">
            <label class="layui-form-label">员工id</label>
            <div class="layui-input-block">
                <input type="text" name="beauticianId" lay-verify="<#--required-->" autocomplete="off" placeholder=""
                       class="layui-input">
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label xrequired">名字</label>
            <div class="layui-input-block">
                <input type="text" name="name" lay-verify="required" autocomplete="off" placeholder="请输入员工名称"
                       class="layui-input">
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label xrequired">电话</label>
            <div class="layui-input-block">
                <input type="text" name="mobile" lay-verify="required" autocomplete="off" placeholder="请输入员工电话"
                       class="layui-input"> <span style="color: red;">电话格式:例 028-38221918 手机格式：例 18284521115</span>
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label xrequired">性别</label>
            <div class="layui-input-block">
                <input type="radio" name="gender" value="1" title="男" checked="">
                <input type="radio" name="gender" value="0" title="女">
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label xrequired">是否计算底薪</label>
            <div class="layui-input-block">
                <input type="radio" name="isBasicSalary" value="1" title="是" checked="">
                <input type="radio" name="isBasicSalary" value="0" title="否">
            </div>
        </div>

        <#--<div class="layui-form-item" hidden="true">
            <label class="layui-form-label">员工号码</label>
            <div class="layui-input-block">
                <input type="text" name="staffNumber" lay-verify="&lt;#&ndash;required&ndash;&gt;" autocomplete="off"
                       placeholder="请输入员工号"
                       class="layui-input">
            </div>
        </div>-->


        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">入职时间</label>
                <div class="layui-input-inline">
                    <input type="text" name="entryTime" class="layui-input" id="entryTimeAdd"
                           placeholder="yyyy-MM-dd HH:mm:ss">
                </div>
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label xrequired">所属店铺</label>
            <div class="layui-input-block" style="width:150px;">
                <select name="storeId" id="storeAdd" lay-filter="store" lay-verify="required">
                </select>
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label">所属分组</label>
            <div class="layui-input-block" style="width:150px;">
                <select name="groupId" id="groupIdAdd" lay-filter="groupId" <#--lay-verify="required"-->>
                </select>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label xrequired">所属部门</label>
            <div class="layui-input-block" style="width:150px;">
                <select name="departmentId" id="departmentId" lay-filter="departmentId" lay-verify="required">
                </select>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label xrequired">所属职位分类</label>
            <div class="layui-input-block" style="width:150px;">
                <select name="postCategoryId" id="postCategoryIdAdd" lay-filter="postCategoryIdAdd"
                        lay-verify="required">
                </select>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label xrequired">所属职位</label>
            <div class="layui-input-block" style="width:150px;">
                <select name="postId" id="postIdAdd" lay-filter="postId" lay-verify="required">
                </select>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">是否跳过轮班</label>
            <div class="layui-input-block">
                <input type="radio" name="isSkipTurn" value="0" title="否" checked="">
                <input type="radio" name="isSkipTurn" value="1" title="是">
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">手法评分</label>
            <div class="layui-input-block">
                <input type="text" name="tactGrade" <#--lay-verify="required"--> autocomplete="off"
                       placeholder="请输入员工手法评分"
                       class="layui-input">
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">技能评分</label>
            <div class="layui-input-block">
                <input type="text" name="skillGrade" <#--lay-verify="required"--> autocomplete="off"
                       placeholder="请输入员工技能评分"
                       class="layui-input">
            </div>
        </div>

        <div class="layui-form-item" hidden="true">
            <label class="layui-form-label">累计客户</label>
            <div class="layui-input-block">
                <input type="text" name="cumulativeCustomer" <#--lay-verify="required"--> autocomplete="off"
                       placeholder="请输入员工累计评分"
                       class="layui-input">
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">排序</label>
            <div class="layui-input-block">
                <input type="text" name="sort" <#--lay-verify="required"--> autocomplete="off" placeholder="请输入员工排序"
                       class="layui-input">
            </div>
        </div>


        <#--<div class="layui-form-item">
            <label class="layui-form-label">员工等级</label>
            <div class="layui-input-block">
                <select name="gradeId" id="gradeIdAdd" lay-filter="gradeId" lay-verify="required">
                    <option value="1">一级</option>
                    <option value="2">二级</option>
                    <option value="3">三级</option>
                    <option value="4">四级</option>
                    <option value="5">五级</option>
                </select>
            </div>
        </div>-->


        <div class="layui-upload">
            <button type="button" class="layui-btn" id="test1">选择员工头像图片</button>
            <button type="button" class="layui-btn" id="startUpAdd">开始上传</button>
            <div class="layui-upload-list">
                <img class="layui-upload-img" id="demo1" style="width:100px;height: 100px">
                <p id="demoText"></p>
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label">在职状态</label>
            <div class="layui-input-block">
                <input type="radio" name="workingState" value="0" title="不在职">
                <input type="radio" name="workingState" value="1" title="在职" checked="">
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label">人物简介</label>
            <#--<div class="layui-input-block">
                <input type="text" name="introduction" &lt;#&ndash;lay-verify="required"&ndash;&gt; autocomplete="off"
                       placeholder="请输入员工人物简介"
                       class="layui-input">
            </div>-->
            <div class="layui-input-block">
                <textarea name="introduction" id="introductionAdd" style="display: none;"></textarea>
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label">是否兼职</label>
            <div class="layui-input-block">
                <input type="radio" name="isPartTime" lay-filter="isPartTime" value="0" title="否" checked="">
                <input type="radio" name="isPartTime" lay-filter="isPartTime" value="1" title="是">
            </div>
        </div>

        <fieldset class="layui-elem-field" id="partTimeJob">
            <legend>兼职职位</legend>
            <div class="layui-field-box">
                <div class="layui-form-item">
                    <label class="layui-form-label">兼职职位分类</label>
                    <div class="layui-input-block" style="width:150px;">
                        <select name="partTimePostCategoryId" id="partTimePostCategoryId"
                                lay-filter="partTimePostCategoryId" <#--lay-verify="required"-->>
                        </select>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label">兼职职位</label>
                    <div class="layui-input-block" style="width:150px;">
                        <select name="partTimePostId" id="partTimePostId"
                                lay-filter="partTimePostId" <#--lay-verify="required"-->>
                        </select>
                    </div>
                </div>
            </div>
        </fieldset>
        <#--   <div class="layui-form-item" hidden="true">
               <label class="layui-form-label">用户userId</label>
               <div class="layui-input-block">
                   <input type="text" name="userId" lay-verify="&lt;#&ndash;required&ndash;&gt;" autocomplete="off" placeholder="请输入员工用户id"
                          class="layui-input">
               </div>
           </div>-->


        <div class="layui-form-item">
            <div class="layui-input-block">
                <button name="submit" id="" class="layui-btn" lay-submit="" lay-filter="addsubmitfilter">立即提交
                </button>
                <button id="reset" type="reset" class="layui-btn layui-btn-primary">重置</button>
            </div>
        </div>
    </form>
</div>


<#--点击添加子公司的表单-->
<div id="addformzgs" hidden="" class="layui-fluid" style="margin: 15px;">
    <form class="layui-form layui-form-pane layui-personal" action="" id="addformzgsform" lay-filter="addformzgs">

        <div class="layui-form-item" hidden="true">
            <label class="layui-form-label">员工id</label>
            <div class="layui-input-block">
                <input type="text" name="beauticianId" lay-verify="<#--required-->" autocomplete="off" placeholder=""
                       class="layui-input">
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label xrequired">名字</label>
            <div class="layui-input-block">
                <input type="text" name="name" lay-verify="required" autocomplete="off" placeholder="请输入员工名称"
                       class="layui-input">
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label xrequired">电话</label>
            <div class="layui-input-block">
                <input type="text" name="mobile" lay-verify="required" autocomplete="off" placeholder="请输入员工电话"
                       class="layui-input"> <span style="color: red;">电话格式:例 028-38221918 手机格式：例 18284521115</span>
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label xrequired">性别</label>
            <div class="layui-input-block">
                <input type="radio" name="gender" value="1" title="男" checked="">
                <input type="radio" name="gender" value="0" title="女">
            </div>
        </div>



        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">入职时间</label>
                <div class="layui-input-inline">
                    <input type="text" name="entryTime" class="layui-input" id="entryTimeAdd"
                           placeholder="yyyy-MM-dd HH:mm:ss">
                </div>
            </div>
        </div>




        <div class="layui-form-item">
            <label class="layui-form-label xrequired">所属部门</label>
            <div class="layui-input-block" style="width:150px;">
                <select name="departmentId" id="departmentId_zgs" lay-filter="departmentId" lay-verify="required">
                </select>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label xrequired">所属职位分类</label>
            <div class="layui-input-block" style="width:150px;">
                <select name="postCategoryId" id="postCategoryIdAdd_zgs" lay-filter="postCategoryIdAdd_zgs"
                        lay-verify="required">
                </select>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label xrequired">所属职位</label>
            <div class="layui-input-block" style="width:150px;">
                <select name="postId" id="postIdAdd_zgs" lay-filter="postId" lay-verify="required">
                </select>
            </div>
        </div>


        <div class="layui-upload">
            <button type="button" class="layui-btn" id="test1">选择员工头像图片</button>
            <button type="button" class="layui-btn" id="startUpAdd">开始上传</button>
            <div class="layui-upload-list">
                <img class="layui-upload-img" id="demo1" style="width:100px;height: 100px">
                <p id="demoText"></p>
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label">在职状态</label>
            <div class="layui-input-block">
                <input type="radio" name="workingState" value="0" title="不在职">
                <input type="radio" name="workingState" value="1" title="在职" checked="">
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label">人物简介</label>
            <#--<div class="layui-input-block">
                <input type="text" name="introduction" &lt;#&ndash;lay-verify="required"&ndash;&gt; autocomplete="off"
                       placeholder="请输入员工人物简介"
                       class="layui-input">
            </div>-->
            <div class="layui-input-block">
                <textarea name="introduction" id="introductionAdd" style="display: none;"></textarea>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-input-block">
                <button name="submit" id="" class="layui-btn" lay-submit="" lay-filter="addsubmitfilter">立即提交
                </button>
                <button id="reset" type="reset" class="layui-btn layui-btn-primary">重置</button>
            </div>
        </div>
    </form>
</div>

<#--点击查看或修改后的表单-->
<div id="editformdivid" hidden="" class="layui-fluid" style="margin: 15px;">
    <form class="layui-form layui-form-pane layui-personal" action="" id="editForm" lay-filter="exampleEdit">
        <div class="layui-form-item" hidden="true">
            <label class="layui-form-label">员工id</label>
            <div class="layui-input-block">
                <input type="text" name="beauticianId" lay-verify="<#--required-->" autocomplete="off" placeholder=""
                       class="layui-input">
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label xrequired">名字</label>
            <div class="layui-input-block">
                <input type="text" name="name" lay-verify="required" autocomplete="off" placeholder="请输入员工名称"
                       class="layui-input">
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label xrequired">电话</label>
            <div class="layui-input-block">
                <input type="text" name="mobile" lay-verify="required" autocomplete="off" placeholder="请输入员工电话"
                       class="layui-input">
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label xrequired">性别</label>
            <div class="layui-input-block">
                <input type="radio" name="gender" value="1" title="男" checked="">
                <input type="radio" name="gender" value="0" title="女">
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label xrequired">是否计算底薪</label>
            <div class="layui-input-block">
                <input type="radio" name="isBasicSalary" value="1" title="是" checked="">
                <input type="radio" name="isBasicSalary" value="0" title="否">
            </div>
        </div>

        <#--<div class="layui-form-item" hidden="true">
            <label class="layui-form-label">员工号码</label>
            <div class="layui-input-block">
                <input type="text" name="staffNumber" lay-verify="required" autocomplete="off" placeholder="请输入员工号"
                       class="layui-input">
            </div>
        </div>
    -->

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">入职时间</label>
                <div class="layui-input-inline">
                    <input type="text" name="entryTime" class="layui-input" id="entryTime"
                           placeholder="yyyy-MM-dd HH:mm:ss">
                </div>
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label xrequired">所属店铺</label>
            <div class="layui-input-block" style="width:150px;">
                <select name="storeId" id="store" lay-filter="store" lay-verify="required">
                </select>
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label">所属分组</label>
            <div class="layui-input-block" style="width:150px;">
                <select name="groupId" id="groupId" lay-filter="groupId" <#--lay-verify="required"-->>
                </select>
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label xrequired">所属部门</label>
            <div class="layui-input-block" style="width:150px;">
                <select name="departmentId" id="departmentId_other" lay-filter="departmentId" lay-verify="required">
                </select>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label xrequired">所属职位分类</label>
            <div class="layui-input-block" style="width:150px;">
                <select name="postCategoryId" id="postCategoryId"
                        lay-filter="postCategoryId" <#--lay-verify="required"-->>
                </select>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label xrequired">所属职位</label>
            <div class="layui-input-block" style="width:150px;">
                <select name="postId" id="postId" lay-filter="postId" <#--lay-verify="required"-->>
                </select>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">是否跳过轮班</label>
            <div class="layui-input-block">
                <input type="radio" name="isSkipTurn" value="0" title="否" checked="">
                <input type="radio" name="isSkipTurn" value="1" title="是">
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label">手法评分</label>
            <div class="layui-input-block">
                <input type="text" name="tactGrade" <#--lay-verify="required"--> autocomplete="off"
                       placeholder="请输入员工手法评分"
                       class="layui-input">
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label">技能评分</label>
            <div class="layui-input-block">
                <input type="text" name="skillGrade" <#--lay-verify="required"--> autocomplete="off"
                       placeholder="请输入员工技能评分"
                       class="layui-input">
            </div>
        </div>


        <div class="layui-form-item" hidden="true">
            <label class="layui-form-label">累计客户</label>
            <div class="layui-input-block">
                <input type="text" name="cumulativeCustomer" <#--lay-verify="required"--> autocomplete="off"
                       placeholder="请输入员工累计评分"
                       class="layui-input">
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">排序</label>
            <div class="layui-input-block">
                <input type="text" name="sort" <#--lay-verify="required"--> autocomplete="off" placeholder="请输入员工排序"
                       class="layui-input">
            </div>
        </div>


        <#-- <div class="layui-form-item">
             <label class="layui-form-label">员工等级</label>
             <div class="layui-input-block">
                 <select name="gradeId" id="gradeId" lay-filter="gradeId" lay-verify="required">
                     <option value="1">一级</option>
                     <option value="2">二级</option>
                     <option value="3">三级</option>
                     <option value="4">四级</option>
                     <option value="5">五级</option>
                 </select>
             </div>
         </div>-->


        <div class="layui-upload">
            <button type="button" class="layui-btn" id="test2">选择员工头像图片</button>
            <button type="button" class="layui-btn" id="startUp">开始上传</button>
            <div class="layui-upload-list">
                <img class="layui-upload-img" id="demo2" style="width:100px;height: 100px">
                <p id="demoText2"></p>
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label">在职状态</label>
            <div class="layui-input-block">
                <input type="radio" name="workingState" value="0" title="不在职" checked="">
                <input type="radio" name="workingState" value="1" title="在职">
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label">人物简介</label>
            <#--  <div class="layui-input-block">
                  <input type="text" name="introduction" &lt;#&ndash;lay-verify="required"&ndash;&gt; autocomplete="off"
                         placeholder="请输入员工人物简介"
                         class="layui-input">
              </div>-->
            <div class="layui-input-block">
                <textarea name="introduction" id="introductionEdit" style="display: none;"></textarea>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">是否兼职</label>
            <div class="layui-input-block">
                <input type="radio" name="isPartTime" lay-filter="isPartTimeEdit" value="0" title="否" checked="">
                <input type="radio" name="isPartTime" lay-filter="isPartTimeEdit" value="1" title="是">
            </div>
        </div>


        <fieldset class="layui-elem-field" id="partTimeJobEdit">
            <legend>兼职职位</legend>
            <div class="layui-field-box">
                <div class="layui-form-item">
                    <label class="layui-form-label">兼职职位分类</label>
                    <div class="layui-input-block" style="width:150px;">
                        <select name="partTimePostCategoryId" id="partTimePostCategoryIdEdit"
                                lay-filter="partTimePostCategoryIdEdit" <#--lay-verify="required"-->>
                        </select>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label">兼职职位</label>
                    <div class="layui-input-block" style="width:150px;">
                        <select name="partTimePostId" id="partTimePostIdEdit"
                                lay-filter="partTimePostIdEdit" <#--lay-verify="required"-->>
                        </select>
                    </div>
                </div>
            </div>
        </fieldset>

        <#-- <div class="layui-form-item" hidden="true">
             <label class="layui-form-label">用户userId</label>
             <div class="layui-input-block">
                 <input type="text" name="userId" lay-verify="required" autocomplete="off" placeholder="请输入员工用户id"
                        class="layui-input">
             </div>
         </div>-->

        <div class="layui-form-item">
            <div class="layui-input-block">
                <button name="submit" id="" class="layui-btn" lay-submit="" lay-filter="editsubmitfilter">立即提交
                </button>
                <button id="reset" type="reset" class="layui-btn layui-btn-primary">重置</button>
            </div>
        </div>
    </form>
</div>
<#-- 选择工资查询时间范围-->
    <form class="layui-form layui-form-pane layui-personal" id="chooseSalaryDateForm" action=""
          lay-filter="examplechooseSalaryDateForm"
          method="post"
          hidden="true">
        <div class="layui-inline">
            <label class="layui-form-label">日期时间范围</label>
            <div class="layui-input-inline">
                <input type="text" class="layui-input" id="dateTimeScope" placeholder=" - ">
            </div>
        </div>
    </form>
<#--查看测评结果-->
    <div id="showSalaryDiv" hidden="" class="layui-fluid" style="margin: 15px;">
        <form class="layui-form layui-form-pane layui-personal" id="showSalaryForm" action="" lay-filter="exampleShow"
              method="post">
        </form>
    </div>
    <!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
<#--是否打折自定义显示-->
<script type="text/html" id="isBasicSalary">
    {{#  if(d.isBasicSalary == 0){ }}
    否
    {{#  }else if(d.isBasicSalary == 1){ }}
    是
    {{#  } }}
</script>
<script>

    if ("${currentUser.companyType!}" == "1") {
        $("#add").attr("style","display:none;");
    }
    //列表显示--员工
    var resultImgUrlAdd = "";
    var resultImgUrl = "";
    var nowED = null;
    layui.use('table', function () {
        var table = layui.table;
        table.render({
            elem: '#beautician'
            , url: storeHost + "/manage/beautician/selectBeauticianList"
            , cellMinWidth: 60 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
            , page: true          //显示分页默认不显示
            , method: 'post'
            , id: 'beauticianReload'
            , request: {
                pageName: 'pageNum', //页码的参数名称，默认：page
                limitName: 'pageSize' //每页数据量的参数名，默认：limit
            }
            , where: {
                storeId: 0,
                companyType: "${currentUser.companyType!}",
                companyId: "${currentUser.companyId!}"
            }
            , parseData: function (res) { //将原始数据解析成 table 组件所规定的数据
                return {
                    "code": 0, //解析接口状态
                    "msg": "", //解析提示文本
                    "count": res.result == null ? 0 : res.result.total, //解析数据长度
                    "data": res.result == null ? 0 : res.result.list //解析数据列表
                };
            }
            , cols: [[
                {type: 'checkbox', fixed: 'left', width: 40}
                , {
                    field: 'headUrl', title: '员工头像', fixed: 'left', templet: function (d) {
                        return d.headUrl == "" || d.headUrl == null ? "<div><img src='/noImg.png' style='width:60px;height: 60px'></div>" : "<div><img src=" + d.headUrl + " style='width:60px;height: 60px'></div>"
                    }
                }
                , {field: 'name', title: '员工名称', fixed: 'left'}
                , {field: 'staffNumber', title: '员工号码'}
                , {field: 'isBasicSalary', title: '是否计算底薪', templet: '#isBasicSalary'}
                , {field: 'introduction', title: '人物简介'}
                , {fixed: 'right', title: '操作', align: 'center', toolbar: '#barDemo'}
            ]]
        });
    });


    //增删改查操作实现
    var layerid;//当前弹层id;这个id可以定义多个，主要的目的是为了在回调函数关闭弹层时使用的
    var selectBoxsAll;//授权框中选中的行
    var resultDataAll;//请求返回的所有数据
    var resultDataAllSearch;//请求返回的搜索数据
    var isFind = 0;
    layui.use(['table', 'layer', 'jquery', 'form', 'layedit'], function () {
        var table = layui.table,
            layer = layui.layer,
            $ = layui.jquery,
            form = layui.form,
            layedit = layui.layedit,
            ptool = {
                tool: [
                    'strong' //加粗
                    , 'italic' //斜体
                    , 'underline' //下划线
                    , 'del' //删除线
                    , '|' //分割线
                    , 'left' //左对齐
                    , 'center' //居中对齐
                    , 'right' //右对齐
                    , 'link' //超链接
                    , 'unlink' //清除链接
                    , 'face' //表情
                    , 'image' //插入图片
                    , 'help' //帮助
                ]
            };
        loadPost(null);
        loadSubCompanyStore(form);
        loadPostCategory(form);
        loadPostPartTime(null);
        //监听表格复选框选择
        table.on('checkbox(demo)', function (obj) {
        });


        table.on('checkbox(selectProjectDemo)', function (obj) {
            if (obj.type == "one") {//如果是单行选
                if (obj.checked) {//如果选中,加入
                    selectBoxsAll.push(obj.data.serviceProductId)
                } else {//如果没选中,删除
                    var index = selectBoxsAll.indexOf(obj.data.serviceProductId);
                    if (index > -1) {
                        selectBoxsAll.splice(index, 1);
                    }
                }
            } else if (obj.type == "all") {//如果是全选
                if (isFind == 1) {//如果是搜索
                    if (obj.checked) {//是全选
                        for (var select in resultDataAllSearch) {
                            var flag = true;
                            for (var all in selectBoxsAll) {
                                if (resultDataAllSearch[select].serviceProductId == selectBoxsAll[all]) {
                                    flag = false;
                                }
                            }
                            if (flag == true) {//如果在全部里面找不到，就加入
                                selectBoxsAll.push(resultDataAllSearch[select].serviceProductId)
                            }
                        }
                    } else {//不是全选

                        for (var select in resultDataAllSearch) {
                            var flag = true;
                            for (var all in selectBoxsAll) {
                                if (resultDataAllSearch[select].serviceProductId == selectBoxsAll[all]) {
                                    flag = false;
                                }
                            }
                            if (flag == false) {//如果在全部里面找的到，就删除
                                var inde = selectBoxsAll.indexOf(resultDataAllSearch[select].serviceProductId);
                                selectBoxsAll.splice(inde, 1);
                            }
                        }
                    }
                } else if (isFind == 0) {//不是搜索
                    if (obj.checked) {//是全选
                        selectBoxsAll = new Array();
                        for (var all in resultDataAll) {
                            selectBoxsAll.push(resultDataAll[all].serviceProductId)
                        }
                    } else {//不是全选
                        selectBoxsAll = new Array();
                    }
                }

            }

        });


        //监听工具条
        table.on('tool(demo)', function (obj) {
            var data = obj.data;
            if (obj.event === 'detail') {
                loadShop(data);
                loadGroup(data);
                loadDepartment(data);
                layerShow(form, data, table, $);
            } else if (obj.event === 'del') {
                layer.listDepartmentNoPageconfirm('真的删除行么', function (index) {
                    layerDelete(data, table, $);
                    obj.del();
                    layer.close(index);
                });
            } else if (obj.event === 'edit') {
                loadShop(data);
                loadGroup(data);
                loadDepartment(data);
                layerShowAndEdit(form, data, table, $, layedit, ptool);
            } else if (obj.event === 'addProjuects') {
                bindingProject(data, table, $);
            } else if (obj.event === 'orderwork') {
                orderwork(data, table, $);
            } else if (obj.event === 'checkSalaryDetailed') {
                //页面弹框
                var a2 = layer.open({
                    type: 1,
                    title: '时间范围选择',
                    content: $('#chooseSalaryDateForm'),
                    area: ['346px', '164px'],
                    closeBtn: 1,
                    btn: ['关闭'],
                    btn2: function () {
                        layer.close(a2);
                    },
                    success: function (layero) {
                        $("#chooseSalaryDateForm").attr("data-staffNumber", data.staffNumber)
                        layui.use('laydate', function () {
                            var laydate = layui.laydate;
                            //日期时间范围
                            laydate.render({
                                elem: '#dateTimeScope'
                                , type: 'datetime'
                                , range: true
                                , done: function (value, date) {
                                    var url = dataHost + "/statistic/statisticEvaluating";
                                    var data = {
                                        salesmanID: $("#chooseSalaryDateForm").attr("data-staffNumber"),
                                        startDate: value.split(" - ")[0].replace(/^\s+|\s+$/g, ""),
                                        endDate: value.split(" - ")[1].replace(/^\s+|\s+$/g, "")
                                    };
                                    $.post(url, data, function (result) {
                                        if (result.responseStatusType.message == "Success") {
                                            var a3 = layer.open({
                                                type: 1,
                                                title: '工资结果',
                                                content: $('#showSalaryDiv'),
                                                area: ['828px', '250px'],
                                                closeBtn: 1,
                                                btn: ['关闭'],
                                                btn2: function () {
                                                    layer.close(a3);
                                                },
                                                success: function (layero) {

                                                }
                                            });
                                        } else {

                                        }
                                    })

                                }
                            });
                        });


                    }
                });
            }
        });


        //添加中职位分类
        form.on('select(postCategoryIdAdd)', function (data) {
            loadPostForAdd(data.value)
        });

        form.on('select(postCategoryIdAdd_zgs)', function (data) {
            loadPostForAdd_zgs(data.value)
        });


        //修改中职位分类
        form.on('select(postCategoryId)', function (data) {
            loadPost(data.value)
        });


        //添加中职位分类-兼职
        form.on('select(partTimePostCategoryId)', function (data) {
            loadPostForAddPartTime(data.value)
        });


        //修改中职位分类-兼职
        form.on('select(partTimePostCategoryIdEdit)', function (data) {
            loadPostPartTime(data.value)
        });


        //监听添加提交
        form.on('submit(addsubmitfilter)', function (data) {
            //为了防止form中的id值被重置后置空,将编辑的id存放在label中
            // $("#editid").val($("#editlabelid").html());
            // $("#editlabelid").html("");
            var div = null;
            var companyType = "";
            if ($('input[name="employeeType"]:checked').val() == "1") {
                div = $('#addformzgsform')
                companyType = "2"
            }else {
                div = $('#addeditformid')
                companyType = "3"
            }
            if (resultImgUrlAdd == "") {
                //如果没有上传
                layer.open({
                    skin: 'layui-layer-molv',
                    type: 1,
                    area: "10%",
                    content: "您还未上次头像图片，要继续添加吗？",
                    shadeClose: true,
                    btn: ['继续', '取消'],
                    yes: function (index) {
                        layer.close(index); //如果设定了yes回调，需进行手工关闭
                        var moreContent = layedit.getContent(nowED);
                        $("#introductionAdd").val(moreContent);
                        $.ajax({
                            type: "POST",
                            url: storeHost + "/manage/beautician/insertBeautician",
                            data: div.serialize() + "&createOperator=" + "${currentUser.trueName!}" + "&headUrl=" + resultImgUrlAdd +"&FCreateOrgId=" +"${currentUser.orgK3Number!}"+"&FUseOrgId=" +"${currentUser.orgK3Number!}" +"&companyType="+companyType+"&companyId="+"${currentUser.companyId!}",
                            async: false,
                            error: function (request) {
                                layer.alert("与服务器连接失败/(ㄒoㄒ)/~~");
                                $("#partTimeJob").attr("hidden", false);
                            },
                            success: function (data) {
                                if (data.responseStatusType.message == 'Failure') {
                                    layer.alert(data.responseStatusType.error.errorMsg);
                                    $("#partTimeJob").attr("hidden", false);
                                }
                                if (data.responseStatusType.message == 'Success') {
                                    layer.open({
                                        skin: 'layui-layer-molv',
                                        type: 1,
                                        area: "10%",
                                        content: "操作成功:" + data.result.message,
                                        shadeClose: true,
                                        btn: ["关闭"],
                                        yes: function (index) {
                                            layer.close(index); //如果设定了yes回调，需进行手工关闭
                                            layer.closeAll();
                                            $("#partTimeJob").attr("hidden", false);
                                            resultImgUrlAdd = "";
                                        }, end: function () {
                                            layer.close(layerid);
                                            $("#reset").click();//重置表单
                                            $("#partTimeJob").attr("hidden", false);
                                            table.reload("beauticianReload");
                                        }
                                    });

                                }
                            }
                        });
                    },
                    btn2: function (index) {
                        layer.close(index); //如果设定了yes回调，需进行手工关闭
                    }
                });
            } else {
                $.ajax({
                    type: "POST",
                    url: storeHost + "/manage/beautician/insertBeautician",
                    data: $('#addeditformid').serialize() + "&createOperator=" + "${currentUser.trueName!}" + "&imgUrl=" + resultImgUrlAdd,
                    async: false,
                    error: function (request) {
                        layer.alert("与服务器连接失败/(ㄒoㄒ)/~~");
                    },
                    success: function (data) {
                        if (data.responseStatusType.message == 'Failure') {
                            layer.alert(data.responseStatusType.error.errorMsg);
                        }
                        if (data.responseStatusType.message == 'Success') {
                            layer.open({
                                skin: 'layui-layer-molv',
                                type: 1,
                                area: "10%",
                                content: "操作成功:" + data.result.message,
                                shadeClose: true,
                                btn: ["关闭"],
                                yes: function (index) {
                                    layer.close(index); //如果设定了yes回调，需进行手工关闭
                                    resultImgUrlAdd = "";
                                }, end: function () {
                                    layer.close(layerid);
                                    $("#reset").click();//重置表单
                                    table.reload("beauticianReload");
                                }
                            });
                        }
                    }
                });
            }

            return false;
        });

        //监听修改提交
        form.on('submit(editsubmitfilter)', function (data) {
            var isBasicSalary = $("input[name='isBasicSalary']").is(":checked") == true ? 1 : 0;
            var moreContent = layedit.getContent(nowED);
            $("#introductionEdit").val(moreContent);
            $.ajax({
                type: "POST",
                url: storeHost + "/manage/beautician/updateBeautician",
                data: $('#editForm').serialize() + "&modifyOperator=" + "${currentUser.trueName!}" + "&headUrl=" + resultImgUrl,
                async: false,
                error: function (request) {
                    layer.alert("与服务器连接失败/(ㄒoㄒ)/~~");
                },
                success: function (data) {
                    if (data.responseStatusType.message == 'Failure') {
                        layer.alert(data.responseStatusType.error.errorMsg);
                    }
                    if (data.responseStatusType.message == 'Success') {
                        layer.open({
                            title: '修改'
                            , content: '修改成功！'
                            , btn: ["确认"]
                            , yes: function (index) {
                                layer.close(index); //如果设定了yes回调，需进行手工关闭
                            }, end: function () {
                                layer.close(layerid);
                                table.reload("beauticianReload");
                            }
                        });
                    }
                }
            });
            return false;
        });


        var $ = layui.$;var table = layui.table, active = {
            search: function () {
                var storeId = $(".demoTable select[name='stores'] option:selected").val();
                var keyWordStaffNumber = $(".demoTable input[name='keyWordStaffNumber']").val();
                var keyWordName = $(".demoTable input[name='keyWordName']").val();
                var companyType = "${currentUser.companyType!}";
                var companyId = "${currentUser.companyId!}";
                if (storeId != 0) {
                    companyType = 3;
                    companyId = storeId;
                }
                table.render({
                    elem: '#beautician'
                    , url: storeHost + "/manage/beautician/selectBeauticianList"
                    , cellMinWidth: 60 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
                    , page: true          //显示分页默认不显示
                    , method: 'post'
                    , id: 'beauticianReload'
                    , request: {
                        pageName: 'pageNum', //页码的参数名称，默认：page
                        limitName: 'pageSize' //每页数据量的参数名，默认：limit
                    }
                    , where: {
                        keyWordStaffNumber: keyWordStaffNumber,
                        keyWordName: keyWordName,
                        storeId: storeId,
                        companyType: companyType,
                        companyId: companyId
                    }
                    , parseData: function (res) { //将原始数据解析成 table 组件所规定的数据
                        return {
                            "code": 0, //解析接口状态
                            "msg": "", //解析提示文本
                            "count": res.result == null ? 0 : res.result.total, //解析数据长度
                            "data": res.result == null ? 0 : res.result.list //解析数据列表
                        };
                    }
                    , cols: [[
                        {type: 'checkbox', fixed: 'left', width: 40}
                        , {
                            field: 'headUrl', title: '员工头像', fixed: 'left', templet: function (d) {
                                return d.headUrl == "" || d.headUrl == null ? "<div><img src='/noImg.png' style='width:60px;height: 60px'></div>" : "<div><img src=" + d.headUrl + " style='width:60px;height: 60px'></div>"
                            }
                        }
                        , {field: 'name', title: '员工名称', fixed: 'left'}
                        , {field: 'staffNumber', title: '员工号码'}
                        , {field: 'introduction', title: '人物简介'}
                        , {fixed: 'right', title: '操作', align: 'center', toolbar: '#barDemo'}
                    ]]
                });
            }
            , add: function () {

            }
        };

        $('.demoTable .layui-btn').on('click', function () {
            var type = $(this).data('type');
            active[type] ? active[type].call(this) : '';
        });


        //添加按钮点击事件-打开添加窗口
        $("#add").click(function () {
            $("#reset").click();//重置表单(新建时在进入表单前要重置一下表单的内容，不然表单打开后会显示上一次的表单的内容。这里调用表单中重置按钮的点击方法来重置)
            layerid = layer.open({//开启表单弹层
                skin: 'layui-layer-molv',
                area: '60%',
                type: 1,
                title: '新建员工',
                content: $('#employeeType'), //这里content是一个DOM，注意：最好该元素要存放在body最外层，否则可能被其它的相对元素所影响
                success: function () {

                    nowED = layedit.build('introductionAdd', ptool);
                    $("#demo1").attr("src", "${basePath!}/noImg.png")
                    loadPostCategoryForAdd(form)
                    loadPostCategoryForAdd_zgs(form);
                    loadGroupForAdd();
                    loadShopForAdd();
                    loadDepartmentForAdd();
                    loadDepartmentForAdd_zgs();
                }

            });
        });

        //监听确认-打开对应的添加员工类型弹窗
        form.on('submit(employeeTypeConfir)', function (data) {
            var div = null;
            if ($('input[name="employeeType"]:checked').val() === "1") {
                div = $('#addformzgs');
            } else {
                div = $('#addformdivid');
            }

            $("#reset").click();//重置表单(新建时在进入表单前要重置一下表单的内容，不然表单打开后会显示上一次的表单的内容。这里调用表单中重置按钮的点击方法来重置)
            layerid = layer.open({//开启表单弹层
                // skin: 'layui-layer-molv',
                area: '60%',
                type: 1,
                title: '添加员工',
                content: div, //这里content是一个DOM，注意：最好该元素要存放在body最外层，否则可能被其它的相对元素所影响
                success: function (layero) {

                }
            });
            return false;//防止表单提交后跳转
        });


        123
        //监听性别操作
        form.on('switch(isXiaoshou)', function(obj){
            var isSaleMan;
            if (obj.elem.checked == true) {
                isSaleMan = 1;
            } else {
                isSaleMan = 0;
            }
            //修改员工是否是销售员
            var url = storeHost + "/manage/beautician/updateBeautician";
            var param = {
                beauticianId: obj.value,
                isSaleMan:isSaleMan,
                modifyOperator: "${currentUser.trueName!}"
            };
            $.post(url, param, function (res) {
                if (res.responseStatusType.message == "Success") {
                    layer.msg("设置成功！")
                    //重新加载表格
                    table.reload("beauticianReload");
                } else {
                    layer.msg("设置失败！")
                }
            })

        });

    });


    //修改员工按钮事件-打开修改窗口
    function layerShowAndEdit(form, data, table, $, layedit, ptool) {
        //页面弹框
        layerid = layer.open({
            type: 1,
            title: '员工修改',
            content: $('#editformdivid'),
            area: ['600px', '700px'],
            closeBtn: 1,
            scrollbar: true,
            btn: [],
            yes: function (index, layero) {

            },
            btn2: function () {
                layer.closeAll();
            },
            success: function (layero) {
                form.val('exampleEdit', {
                    "beauticianId": data.beauticianId
                    , "name": data.name
                    , "mobile": data.mobile
                    , "gender": data.gender
                    , "departmentId": data.departmentId
                    , "entryTime": data.entryTime
                    , "storeId": data.storeId
                    , "groupId": data.groupId
                    , "postId": data.postId
                    , "postCategoryId": data.postCategoryId
                    , "isSkipTurn": data.isSkipTurn
                    , "tactGrade": data.tactGrade
                    , "skillGrade": data.skillGrade
                    , "sort": data.sort
                    , "workingState": data.workingState
                    , "introduction": data.introduction
                    , "isPartTime": data.isPartTime
                    , "isBasicSalary": data.isBasicSalary
                    , "partTimePostId": data.partTimePostId
                    , "partTimePostCategoryId": data.partTimePostCategoryId
                });
                //头像地址-赋值
                layero.find("img[id='demo2']").attr("src", (data.headUrl == null || data.headUrl == "") ? "${basePath!}/noImg.png" : data.headUrl);
                layui.form.render();
                //富文本赋值
                var index = layedit.build("introductionEdit", ptool);
                nowED = index;
                //富文本赋值
                layedit.setContent(index, data.introduction);
            }

        });
    }

    //删除员工按钮事件
    function layerDelete(data, table, $) {
        //删除数据库数据
        var url = storeHost + "/manage/beautician/deleteBeautician";
        var data = {
            beauticianIds: data.beauticianId,
            modifyOperator: "${currentUser.trueName!}"
        };
        $.post(url, data, function (res) {
            if (res.responseStatusType.message == "Success") {
                layer.open({
                    title: '删除'
                    , content: '删除成功！'
                });
                //重新加载表格
                table.reload("beauticianReload");
            } else {
                layer.open({
                    title: '删除'
                    , content: '删除失败！'
                });
            }
        })
    }


    //绑定授权项目事件
    function bindingProject(datas, table, $) {
        isFind = 0;
        var a3 = layer.open({
            type: 1,
            title: '护理项目',
            area: ['740px', '500px'],
            closeBtn: 1,
            scrollbar: true,
            content: '<div class="demoTableSerch layui-form">\n' +
                '    <div class="layui-form-item">\n' +
                '        <div class="layui-inline">\n' +
                '            <label class="layui-form-label">商品名称</label>\n' +
                '            <div class="layui-input-inline">\n' +
                '                <input class="layui-input" type="text" name="keyWordProductName" autocomplete="off"\n' +
                '                       placeholder="输入商品名称">\n' +
                '            </div>\n' +
                '            <label class="layui-form-label">商品号</label>\n' +
                '            <div class="layui-input-inline">\n' +
                '                <input class="layui-input" type="text" name="keyWordProductCode" autocomplete="off" placeholder="输入商品号">\n' +
                '            </div>\n' +
                '        </div>\n' +
                '        <div class="layui-inline">\n' +
                '            <button class="layui-btn"  id="find"><i class="layui-icon layui-icon-search"></i></button>\n' +
                '        </div>\n' +
                '    </div>\n' +
                '</div>' +
                '<table id="selectProject" lay-filter="selectProjectDemo"></table>',
            btn: ['提交', '取消'],
            yes: function (index, layero) {
                var url = storeHost + "/manage/beautician/insertProjectToBeautician";//添加授权
                var params = {
                    beauticianId: datas.beauticianId,
                    projects: JSON.stringify(selectBoxsAll)
                };
                $.post(url, params, function (res) {
                    if (res.responseStatusType.message == "Success") {
                        layer.open({
                            title: '授权'
                            , content: '授权成功！'
                            , btn: ["关闭"]
                            , yes: function (index) {
                                layer.close(index); //如果设定了yes回调，需进行手工关闭
                                layer.close(a3);
                            }
                        });
                    } else {

                    }
                })
            },
            btn2: function () {
                layer.closeAll();
            },
            success: function (layero, index) {

                /*----------------渲染表格数据-------------------*/
                layui.use('table', function () {
                    var table = layui.table;
                    var $ = layui.jquery;
                    table = $.extend(table, {config: {checkName: 'isChecked'}});
                    table.render({
                        elem: layero.find('#selectProject')
                        , url: storeHost + "/manage/beautician/selectProject"
                        , cellMinWidth: 60 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
                        , page: true          //显示分页默认不显示
                        , method: 'post'
                        , request: {
                            pageName: 'pageNum', //页码的参数名称，默认：page
                            limitName: 'pageSize' //每页数据量的参数名，默认：limit
                        }
                        , where: {
                            beauticianId: datas.beauticianId
                        }
                        , id: "allDataTable"
                        , parseData: function (res) { //将原始数据解析成 table 组件所规定的数据
                            return {
                                "code": 0, //解析接口状态
                                "msg": "暂无授权项目", //解析提示文本
                                "count": res.result == null ? 0 : res.result.total, //解析数据长度
                                "data": res.result == null ? 0 : res.result.list //解析数据列表
                            };
                        }
                        , cols: [[
                            {type: 'checkbox', fixed: 'left', width: 100}
                            , {field: 'serviceProductId', title: '项目id', sort: true}
                            , {field: 'productCode', title: '商品编号'}
                            , {field: 'productName', title: '项目名称'}
                            , {field: 'isChecked', title: '是否选择'}
                        ]],
                        done: function (res, curr, count) {
                            resultDataAll = res.data;
                            selectBoxsAll = new Array();
                            var checkStatus = table.checkStatus('allDataTable')
                                , data = checkStatus.data;
                            for (var p in data) {
                                //加入所有选中项目
                                selectBoxsAll.push(data[p].serviceProductId)
                            }
                        }
                    });

                });
                /*----------------渲染表格数据-------------------*/


                /*----------------给搜索按钮绑定事件-------------------*/
                layui.use('layer', function () {
                    var $ = layui.jquery, layer = layui.layer;
                    $(document).on('click', '#find', function () {
                        isFind = 1;
                        layui.use('table', function () {
                            var table = layui.table;
                            var $ = layui.jquery;
                            table = $.extend(table, {config: {checkName: 'isChecked'}});
                            var keyWordProductName = $(".demoTableSerch input[name='keyWordProductName']").val();
                            var keyWordProductCode = $(".demoTableSerch input[name='keyWordProductCode']").val();
                            table.render({
                                elem: layero.find('#selectProject')
                                , url: storeHost + "/manage/beautician/selectProject"
                                , cellMinWidth: 60 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
                                , page: true          //显示分页默认不显示
                                , method: 'post'
                                , request: {
                                    pageName: 'pageNum', //页码的参数名称，默认：page
                                    limitName: 'pageSize' //每页数据量的参数名，默认：limit
                                }
                                , id: "searchDataTable"
                                , where: {
                                    keyWordProductName: keyWordProductName,
                                    keyWordProductCode: keyWordProductCode,
                                    beauticianId: datas.beauticianId
                                }
                                , parseData: function (res) { //将原始数据解析成 table 组件所规定的数据
                                    return {
                                        "code": 0, //解析接口状态
                                        "msg": "暂无授权项目", //解析提示文本
                                        "count": res.result == null ? 0 : res.result.total, //解析数据长度
                                        "data": res.result == null ? 0 : res.result.list //解析数据列表
                                    };
                                }
                                , cols: [[
                                    {type: 'checkbox', fixed: 'left', width: 100}
                                    , {field: 'serviceProductId', title: '项目id', sort: true}
                                    , {field: 'productCode', title: '商品编号'}
                                    , {field: 'productName', title: '项目名称'}
                                    , {field: 'isChecked', title: '是否选择'}
                                ]],
                                done: function (res, curr, count) {
                                    resultDataAllSearch = res.data;
                                }
                            });
                        });
                    });
                });
                /*----------------给搜索按钮绑定事件-------------------*/
            }
        });

    }


    var currentBeauticianId = "";
    var currentDate = "";
    var leisureTimeNodesArray = new Array();
    var busyTimeNodesArray = new Array();
    var restTimeNodesArray = new Array();
    var a4;

    //排班事件
    function orderwork(datas, table, $) {
        isFind = 0;
        a4 = layer.open({
            type: 1,
            title: '排班管理',
            area: ['740px', '600px'],
            closeBtn: 1,
            scrollbar: true,
            content: $(".orderworkDate"),
            btn: ['提交', '取消'],
            yes: function (index, layero) {
                /*------------获取三种状态时间节点的数组-------------*/
                var leisureTimeNodesArrayAdd = new Array();
                var busyTimeNodesArrayAdd = new Array();
                var restTimeNodesArrayAdd = new Array();
                $(".orderworkDate input[name='check']").each(function (i) {
                    if ($(this).attr("data-type") == 1) {
                        leisureTimeNodesArrayAdd.push($(this).next().text())
                    } else if ($(this).attr("data-type") == 2) {
                        busyTimeNodesArrayAdd.push($(this).next().text())
                    } else if ($(this).attr("data-type") == 3) {
                        restTimeNodesArrayAdd.push($(this).next().text())
                    }
                })

                /*------------获取三种状态时间节点的数组-------------*/

                var url = storeHost + "/manage/orderwork/updateOrderwork";//添加或修改排班
                var params = {
                    beauticianId: currentBeauticianId,
                    orderworkDate: currentDate,
                    leisureTimeNodes: JSON.stringify(leisureTimeNodesArrayAdd),
                    busyTimeNodes: JSON.stringify(busyTimeNodesArrayAdd),
                    restTimeNodes: JSON.stringify(restTimeNodesArrayAdd)
                };
                $.post(url, params, function (res) {
                    if (res.responseStatusType.message == "Success") {
                        layer.open({
                            title: '排班'
                            , content: '排班成功！'
                            , btn: ["关闭"]
                            , yes: function (index) {
                                layer.close(index); //如果设定了yes回调，需进行手工关闭
                                layer.close(a4);
                            }
                        });
                    } else {

                    }
                })
            },
            btn2: function () {
                layer.closeAll();
                $(".orderworkDate input[name='check']").parent().css("background-color", "rgb(90, 124, 72)");
                $(".orderworkDate input[name='check']").attr("data-type", 1);
            },
            success: function (layero, index) {
                $(".nore").css("display", "none")
                $(".basetime").attr("readonly", "readonly");
                $(".orderworkDate input[name='check']").parent().css("background-color", "rgb(90, 124, 72)");
                $(".orderworkDate input[name='check']").attr("data-type", 1);
                currentBeauticianId = datas.beauticianId;
            }
        });

    }

    //时间状态管理事件
    function timeStatus(data) {
        if (data == 1) { //空闲
            $(".orderworkDate input[name='check']:checked").each(function (i) {
                $(this).parent().css("background-color", '#5A7C48');
                $(this).attr("checked", false)
                $(this).attr("data-type", 1)
            })

        } else if (data == 2) {//忙碌
            $(".orderworkDate input[name='check']:checked").each(function (i) {
                $(this).parent().css("background-color", '#F58100')
                $(this).attr("checked", false)
                $(this).attr("data-type", 2)
            })
        } else if (data == 3) {//休息
            $(".orderworkDate input[name='check']:checked").each(function (i) {
                $(this).parent().css("background-color", '#B2B2B2')
                $(this).attr("checked", false)
                $(this).attr("data-type", 3)
            })
        }

    }

    //批量修改时间状态按钮事件
    function moreTime() {
        var beginTimeValue = $("select[name='begin_time'] option:checked").val();
        var endTimeValue = $("select[name='end_time'] option:checked").val();
        var timeStatus = $("select[name='time_status'] option:checked").val();
        if (eval(endTimeValue) == 0 || eval(beginTimeValue) == 0) {
            alert("起始时间或结束时间不能为空")
            return;
        }
        if (eval(endTimeValue) < eval(beginTimeValue)) {
            alert("起始时间不能大于结束时间")
            return;
        }

        if (eval(timeStatus) == 0) {
            alert("请选择时间状态")
            return;
        }
        //给时间范围内的节点赋值
        $(".orderworkDate input[name='check']").each(function () {
            if ($(this).val() <= eval(endTimeValue) && $(this).val() >= beginTimeValue) {
                if (eval(timeStatus) == 1) {
                    $(this).parent().css("background-color", "#5A7C48");
                    $(this).attr("data-type", "1");
                } else if (eval(timeStatus) == 2) {
                    $(this).parent().css("background-color", "#F58100");
                    $(this).attr("data-type", "2");
                } else if (eval(timeStatus) == 3) {
                    $(this).parent().css("background-color", "#B2B2B2");
                    $(this).attr("data-type", "3");
                }
            }
        })

    }

    //删除排班事件
    function deleteOrderWork(data) {
        var url = storeHost + "/manage/orderwork/deleteOrderwork";//删除排班
        var params = {
            beauticianId: currentBeauticianId,
            orderworkDate: currentDate
        };
        $.post(url, params, function (res) {
            if (res.responseStatusType.message == "Success") {
                layer.open({
                    title: '删除排班'
                    , content: '删除成功！'
                    , btn: ["关闭"]
                    , yes: function (index) {
                        layer.close(index); //如果设定了yes回调，需进行手工关闭
                        layer.close(a4);
                    }
                });
            } else {
                layer.msg(res.responseStatusType.error.errorMsg)
            }
        })

    }

    //查看员工按钮事件
    function layerShow(form, data, table, $) {
        //页面弹框
        layerid = layer.open({
            type: 1,
            title: '店铺详情',
            content: $('#editformdivid'),
            scrollbar: true,
            area: ['600px', '700px'],
            closeBtn: 1,
            btn: ['关闭'],
            btn2: function () {
                layer.close(a2)
            },
            success: function (layero) {
                form.val('exampleEdit', {
                    "beauticianId": data.beauticianId
                    , "name": data.name
                    , "mobile": data.mobile
                    , "gender": data.gender
                    , "departmentId": data.departmentId
                    , "entryTime": data.entryTime
                    , "storeId": data.storeId
                    , "groupId": data.groupId
                    , "postId": data.postId
                    , "postCategoryId": data.postCategoryId
                    , "isSkipTurn": data.isSkipTurn
                    , "tactGrade": data.tactGrade
                    , "skillGrade": data.skillGrade
                    , "sort": data.sort
                    , "workingState": data.workingState
                    , "introduction": data.introduction
                    , "isPartTime": data.isPartTime
                });
                //头像地址-赋值
                layero.find("img[id='demo2']").attr("src", (data.headUrl == null || data.headUrl == "") ? "${basePath!}/noImg.png" : data.headUrl);
                layui.form.render();
            }
        });
    }


    123
    //加载店铺信息-修改查看中初始化
    function loadShop(datas) {
        //加载店铺列表信息
        var url = storeHost + "/manage/store/selectStoreList";
        var data = {companyType: "${currentUser.companyType!}", companyId: "${currentUser.companyId!}"};
        $.post(url, data, function (result) {
            if (result.responseStatusType.message == "Success") {
                var list = result.result.list;    //返回的数据
                var server = document.getElementById("store"); //server为select定义的id
                server.innerHTML = "<option value='' selected='selected'>请选择</option>";
                for (var p in list) {
                    var option = document.createElement("option");  // 创建添加option属性
                    option.setAttribute("value", list[p].storeId); // 给option的value添加值
                    option.innerText = list[p].name;     // 打印option对应的纯文本
                    server.appendChild(option);           //给select添加option子标签
                    if (datas.storeId == option.getAttribute("value")) {
                        option.setAttribute("selected", true)
                    }
                }
                layui.form.render();
            } else {

            }
        })
    }

    //加载店铺信息-添加中初始化
    function loadShopForAdd() {
        //加载店铺列表信息
        var url = storeHost + "/manage/store/selectStoreList";
        var data = {companyType: "${currentUser.companyType!}", companyId: "${currentUser.companyId!}"};
        $.post(url, data, function (result) {
            if (result.responseStatusType.message == "Success") {
                var list = result.result.list;    //返回的数据
                var server = document.getElementById("storeAdd"); //server为select定义的id
                server.innerHTML = "<option value='' selected='selected'>请选择</option>";
                for (var p in list) {
                    var option = document.createElement("option");  // 创建添加option属性
                    option.setAttribute("value", list[p].storeId); // 给option的value添加值
                    option.innerText = list[p].name;     // 打印option对应的纯文本
                    server.appendChild(option);           //给select添加option子标签
                }
                layui.form.render();
            } else {

            }
        })
    }

    //加载分组信息-修改查看中初始化
    function loadGroup(datas) {
        //加载店铺列表信息
        var url = storeHost + "/manage/beautician/selectGroup";
        var data = {};
        $.post(url, data, function (result) {
            if (result.responseStatusType.message == "Success") {
                var list = result.result.list;    //返回的数据
                var server = document.getElementById("groupId"); //server为select定义的id
                server.innerHTML = "<option value='' selected='selected'>请选择</option>";
                for (var p in list) {
                    var option = document.createElement("option");  // 创建添加option属性
                    option.setAttribute("value", list[p].groupId); // 给option的value添加值
                    option.innerText = list[p].name;     // 打印option对应的纯文本
                    server.appendChild(option);           //给select添加option子标签
                    if (datas.groupId == option.getAttribute("value")) {
                        option.setAttribute("selected", true)
                    }
                }
                layui.form.render();
            } else {

            }
        })
    }

    //加载分组信息-添加中初始化
    function loadGroupForAdd() {
        //加载店铺列表信息
        var url = storeHost + "/manage/beautician/selectGroup";
        var data = {};
        $.post(url, data, function (result) {
            if (result.responseStatusType.message == "Success") {
                var list = result.result.list;    //返回的数据
                var server = document.getElementById("groupIdAdd"); //server为select定义的id
                server.innerHTML = "<option value='' selected='selected'>请选择</option>";
                for (var p in list) {
                    var option = document.createElement("option");  // 创建添加option属性
                    option.setAttribute("value", list[p].groupId); // 给option的value添加值
                    option.innerText = list[p].name;     // 打印option对应的纯文本
                    server.appendChild(option);           //给select添加option子标签
                }
                layui.form.render();
            } else {

            }
        })
    }


    //加载职位分组信息-修改查看中初始化
    function loadPostCategory(form) {
        var url = storeHost + "/manage/industry/selectListIndustryNoPage";
        var data = {};
        $.post(url, data, function (result) {
            if (result.responseStatusType.message == "Success") {
                var list = result.result;    //返回的数据
                var server = document.getElementById("postCategoryId"); //server为select定义的id
                server.innerHTML = "<option value=''>直接选择或搜索选择</option>";

                var server2 = document.getElementById("partTimePostCategoryIdEdit"); //server为select定义的id
                server2.innerHTML = "<option value='0'>直接选择或搜索选择</option>";
                for (var p in list) {
                    var optgroup = document.createElement("optgroup");  // 创建添加optgroup属性
                    optgroup.setAttribute("label", list[p].industryName); // 给optgroup的label添加值
                    var postCategoryList = list[p].postCategoryList;
                    for (var n in postCategoryList) {
                        var option = document.createElement("option");  // 创建添加option属性
                        option.setAttribute("value", postCategoryList[n].postCategoryId); // 给option的value添加值
                        option.innerText = postCategoryList[n].name;     // 打印option对应的纯文本
                        optgroup.appendChild(option)
                    }
                    server.appendChild(optgroup);           //给select添加option子标签

                    var optgroup2 = document.createElement("optgroup");  // 创建添加optgroup属性
                    optgroup2.setAttribute("label", list[p].industryName); // 给optgroup的label添加值
                    var postCategoryList2 = list[p].postCategoryList;
                    for (var n in postCategoryList2) {
                        var option2 = document.createElement("option");  // 创建添加option属性
                        option2.setAttribute("value", postCategoryList2[n].postCategoryId); // 给option的value添加值
                        option2.innerText = postCategoryList2[n].name;     // 打印option对应的纯文本
                        optgroup2.appendChild(option2)
                    }
                    server2.appendChild(optgroup2);           //给select添加option子标签
                }
            } else {

            }
            form.render();
        });
    }

    //加载职位分组信息-添加中初始化
    function loadPostCategoryForAdd(form) {
        var url = storeHost + "/manage/industry/selectListIndustryNoPage";
        var data = {};
        $.post(url, data, function (result) {
            if (result.responseStatusType.message == "Success") {
                var list = result.result;    //返回的数据
                var server = document.getElementById("postCategoryIdAdd"); //server为select定义的id
                server.innerHTML = "<option value=''>直接选择或搜索选择</option>";

                var server2 = document.getElementById("partTimePostCategoryId"); //server为select定义的id
                server2.innerHTML = "<option value='0'>直接选择或搜索选择</option>";
                for (var p in list) {
                    var optgroup = document.createElement("optgroup");  // 创建添加optgroup属性
                    optgroup.setAttribute("label", list[p].industryName); // 给optgroup的label添加值
                    var postCategoryList = list[p].postCategoryList;
                    for (var n in postCategoryList) {
                        var option = document.createElement("option");  // 创建添加option属性
                        option.setAttribute("value", postCategoryList[n].postCategoryId); // 给option的value添加值
                        option.innerText = postCategoryList[n].name;     // 打印option对应的纯文本
                        optgroup.appendChild(option)
                    }
                    server.appendChild(optgroup);           //给select添加option子标签

                    var optgroup2 = document.createElement("optgroup");  // 创建添加optgroup属性
                    optgroup2.setAttribute("label", list[p].industryName); // 给optgroup的label添加值
                    var postCategoryList2 = list[p].postCategoryList;
                    for (var n in postCategoryList2) {
                        var option2 = document.createElement("option");  // 创建添加option属性
                        option2.setAttribute("value", postCategoryList2[n].postCategoryId); // 给option的value添加值
                        option2.innerText = postCategoryList2[n].name;     // 打印option对应的纯文本
                        optgroup2.appendChild(option2)
                    }
                    server2.appendChild(optgroup2);           //给select添加option子标签
                }

            } else {

            }
            form.render();
        });
    }

    //加载职位分组信息-添加中初始化
    function loadPostCategoryForAdd_zgs(form) {
        var url = storeHost + "/manage/industry/selectListIndustryNoPage";
        var data = {};
        $.post(url, data, function (result) {
            if (result.responseStatusType.message == "Success") {
                var list = result.result;    //返回的数据
                var server = document.getElementById("postCategoryIdAdd_zgs"); //server为select定义的id
                server.innerHTML = "<option value=''>直接选择或搜索选择</option>";

                for (var p in list) {
                    var optgroup = document.createElement("optgroup");  // 创建添加optgroup属性
                    optgroup.setAttribute("label", list[p].industryName); // 给optgroup的label添加值
                    var postCategoryList = list[p].postCategoryList;
                    for (var n in postCategoryList) {
                        var option = document.createElement("option");  // 创建添加option属性
                        option.setAttribute("value", postCategoryList[n].postCategoryId); // 给option的value添加值
                        option.innerText = postCategoryList[n].name;     // 打印option对应的纯文本
                        optgroup.appendChild(option)
                    }
                    server.appendChild(optgroup);           //给select添加option子标签
                }

            } else {

            }
            form.render();
        });
    }


    //加载职位信息-修改查看中初始化
    function loadPost(postCategoryId) {
        //加载店铺列表信息
        var url = storeHost + "/manage/beautician/selectPostNoPage";
        var data = {"postCategoryId": postCategoryId};
        $.post(url, data, function (result) {
            if (result.responseStatusType.message == "Success") {
                var list = result.result;    //返回的数据
                var server = document.getElementById("postId"); //server为select定义的id
                server.innerHTML = "<option value='' selected='selected'>请选择</option>";
                for (var p in list) {
                    var option = document.createElement("option");  // 创建添加option属性
                    option.setAttribute("value", list[p].postId); // 给option的value添加值
                    option.innerText = list[p].name;     // 打印option对应的纯文本
                    server.appendChild(option);           //给select添加option子标签
                }

            } else {

            }
            layui.form.render();
        })
    }

    //加载职位信息-添加查看中初始化
    function loadPostForAdd(postCategoryId) {
        //加载店铺列表信息
        var url = storeHost + "/manage/beautician/selectPostNoPage";
        var data = {"postCategoryId": postCategoryId};
        $.post(url, data, function (result) {
            if (result.responseStatusType.message == "Success") {
                var list = result.result;    //返回的数据
                var server = document.getElementById("postIdAdd"); //server为select定义的id
                server.innerHTML = "<option value='' selected='selected'>请选择</option>";
                for (var p in list) {
                    var option = document.createElement("option");  // 创建添加option属性
                    option.setAttribute("value", list[p].postId); // 给option的value添加值
                    option.innerText = list[p].name;     // 打印option对应的纯文本
                    server.appendChild(option);           //给select添加option子标签
                }
                layui.form.render();
            } else {

            }
            layui.form.render();
        })
    }

    //加载职位信息-添加子公司查看中初始化
    function loadPostForAdd_zgs(postCategoryId) {
        //加载店铺列表信息
        var url = storeHost + "/manage/beautician/selectPostNoPage";
        var data = {"postCategoryId": postCategoryId};
        $.post(url, data, function (result) {
            var server = document.getElementById("postIdAdd_zgs"); //server为select定义的id
            if (result.responseStatusType.message == "Success") {
                var list = result.result;    //返回的数据
                server.innerHTML = "<option value='' selected='selected'>请选择</option>";
                for (var p in list) {
                    var option = document.createElement("option");  // 创建添加option属性
                    option.setAttribute("value", list[p].postId); // 给option的value添加值
                    option.innerText = list[p].name;     // 打印option对应的纯文本
                    server.appendChild(option);           //给select添加option子标签
                }
                layui.form.render();
            } else {
                server.innerHTML = "<option value='' selected='selected'>请选择</option>";
            }
            layui.form.render();
        })
    }


    //加载部门信息-添加查看中初始化
    function loadDepartmentForAdd() {
        //加载店铺列表信息
        var url = storeHost + "/manage/department/listDepartmentNoPage";
        var data = {
            "companyType": "${currentUser.companyType!}",
            "companyId": "${currentUser.companyId!}"
        };
        $.post(url, data,function (result) {
            if (result.responseStatusType.message == "Success") {
                var list = result.result;    //返回的数据
                var server = document.getElementById("departmentId"); //server为select定义的id
                server.innerHTML = "<option value='' selected='selected'>请选择</option>";
                for (var p in list) {
                    var option = document.createElement("option");  // 创建添加option属性
                    option.setAttribute("value", list[p].id); // 给option的value添加值
                    option.innerText = list[p].name;     // 打印option对应的纯文本
                    server.appendChild(option);           //给select添加option子标签
                }
                layui.form.render();
            } else {

            }
            layui.form.render();
        })
    }

    //加载部门信息-添加查看中初始化
    function loadDepartmentForAdd_zgs() {
        //加载店铺列表信息
        var url = storeHost + "/manage/department/listDepartmentNoPage";
        var data = {
            "companyType": "${currentUser.companyType!}",
            "companyId": "${currentUser.companyId!}"
        };
        $.post(url, data,function (result) {
            if (result.responseStatusType.message == "Success") {
                var list = result.result;    //返回的数据
                var server = document.getElementById("departmentId_zgs"); //server为select定义的id
                server.innerHTML = "<option value='' selected='selected'>请选择</option>";
                for (var p in list) {
                    var option = document.createElement("option");  // 创建添加option属性
                    option.setAttribute("value", list[p].id); // 给option的value添加值
                    option.innerText = list[p].name;     // 打印option对应的纯文本
                    server.appendChild(option);           //给select添加option子标签
                }
                layui.form.render();
            } else {

            }
            layui.form.render();
        })
    }

    //加载部门信息-修改和查看中初始化
    function loadDepartment(datas) {
        //加载店铺列表信息
        var url = storeHost + "/manage/department/listDepartmentNoPage";
        var data = {
            "companyType": "${currentUser.companyType!}",
            "companyId": "${currentUser.companyId!}"
        };
        $.post(url, data,function (result) {
            if (result.responseStatusType.message == "Success") {
                var list = result.result;    //返回的数据
                var server2 = document.getElementById("departmentId_other"); //server为select定义的id
                server2.innerHTML = "<option value='' selected='selected'>请选择</option>";
                for (var p in list) {
                    var option = document.createElement("option");  // 创建添加option属性
                    option.setAttribute("value", list[p].id); // 给option的value添加值
                    option.innerText = list[p].name;     // 打印option对应的纯文本
                    server2.appendChild(option);
                    if (datas.departmentId == option.getAttribute("value")) {
                        option.setAttribute("selected", true)
                    }//给select添加option子标签
                }
                layui.form.render();
            } else {

            }
            layui.form.render();
        })
    }


    //加载职位信息-修改查看中初始化-兼职
    function loadPostPartTime(postCategoryId) {
        //加载店铺列表信息
        var url = storeHost + "/manage/beautician/selectPostNoPage";
        var data = {"postCategoryId": postCategoryId};
        $.post(url, data, function (result) {
            if (result.responseStatusType.message == "Success") {
                var list = result.result;    //返回的数据
                var server = document.getElementById("partTimePostIdEdit"); //server为select定义的id
                server.innerHTML = "<option value='0' selected='selected'>请选择</option>";
                for (var p in list) {
                    var option = document.createElement("option");  // 创建添加option属性
                    option.setAttribute("value", list[p].postId); // 给option的value添加值
                    option.innerText = list[p].name;     // 打印option对应的纯文本
                    server.appendChild(option);           //给select添加option子标签
                }

            } else {

            }
            layui.form.render();
        })
    }

    //加载职位信息-添加查看中初始化-兼职
    function loadPostForAddPartTime(postCategoryId) {
        //加载店铺列表信息
        var url = storeHost + "/manage/beautician/selectPostNoPage";
        var data = {"postCategoryId": postCategoryId};
        $.post(url, data, function (result) {
            if (result.responseStatusType.message == "Success") {
                var list = result.result;    //返回的数据
                var server = document.getElementById("partTimePostId"); //server为select定义的id
                server.innerHTML = "<option value='0' selected='selected'>请选择</option>";
                for (var p in list) {
                    var option = document.createElement("option");  // 创建添加option属性
                    option.setAttribute("value", list[p].postId); // 给option的value添加值
                    option.innerText = list[p].name;     // 打印option对应的纯文本
                    server.appendChild(option);           //给select添加option子标签
                }
                layui.form.render();
            } else {

            }
            layui.form.render();
        })
    }

</script>


<script>
    //关于时间范围的js
    layui.use('laydate', function () {
        var laydate = layui.laydate;
        //时间范围
        laydate.render({
            elem: '#shopBusinessTime'
            , type: 'time'
            , range: true
        });
        //日期时间选择器-添加
        laydate.render({
            elem: '#entryTimeAdd'
            , type: 'datetime'
        });
        //日期时间选择器-修改
        laydate.render({
            elem: '#entryTime'
            , type: 'datetime'
        });
        //常规用法
        laydate.render({
            elem: '#normalDate'
            , done: function (value, date) {
                /*  layer.msg('你选择的日期是：' + value + '<br><br>获得的对象是' + JSON.stringify(date));*/
                currentDate = value;
                $(".nore").css("display", "block")
                /*---------------初始化数据------------------*/
                var url = storeHost + "/manage/orderwork/selectOrderwork";
                var params = {
                    beauticianId: currentBeauticianId,
                    orderworkDate: value
                };
                $.post(url, params, function (res) {
                    if (res.responseStatusType.message == "Success") {
                        leisureTimeNodesArray = JSON.parse(res.result.leisureTimeNodes);
                        busyTimeNodesArray = JSON.parse(res.result.busyTimeNodes);
                        restTimeNodesArray = JSON.parse(res.result.restTimeNodes);
                        //给多选框赋值
                        $(".orderworkDate input[name='check']").each(function (i) {
                            for (var item in leisureTimeNodesArray) {
                                if ($(this).next().text() == leisureTimeNodesArray[item]) {
                                    $(this).parent().css("background-color", '#5A7C48');
                                    $(this).attr("data-type", "1");
                                }
                            }
                            for (var item in busyTimeNodesArray) {
                                if ($(this).next().text() == busyTimeNodesArray[item]) {
                                    $(this).parent().css("background-color", '#F58100');
                                    $(this).attr("data-type", "2");
                                }
                            }
                            for (var item in restTimeNodesArray) {
                                if ($(this).next().text() == restTimeNodesArray[item]) {
                                    $(this).parent().css("background-color", '#B2B2B2');
                                    $(this).attr("data-type", "3");
                                }
                            }
                        })
                    } else {
                        $(".orderworkDate input[name='check']").each(function () {
                            $(this).parent().css("background-color", "#5A7C48");
                            $(this).attr("data-type", "1");
                        })
                        layer.msg(res.responseStatusType.error.errorMsg, {
                            time: 20000, //20s后自动关闭
                            btn: ['明白了']
                        });
                    }
                })
                /*---------------初始化数据------------------*/
            }
        });
    });
</script>


<script>
    layui.use('upload', function () {
        var $ = layui.jquery
            , upload = layui.upload;

        //普通图片上传--添加
        var uploadInst1 = upload.render({
            elem: '#test1'
            , url: storeHost + "/manage/beautician/uploadBeauticianImg"
            , auto: false
            , bindAction: '#startUpAdd'
            , choose: function (obj) {
                //预读本地文件示例，不支持ie8
                obj.preview(function (index, file, result) {
                    $('#demo1').attr('src', result); //图片链接（base64）
                });
            }
            , done: function (res) {
                //如果上传失败
                if (res.code > 0) {
                    return layer.msg('上传失败');
                }
                //上传成功
                resultImgUrlAdd = "http://" + res.result.imageUrl
                layer.msg('上传成功');
            }
            , error: function () {
                //演示失败状态，并实现重传
                var demoText = $('#demoText');
                demoText.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>');
                demoText.find('.demo-reload').on('click', function () {
                    uploadInst1.upload();
                });
            }
        });


        //普通图片上传--修改
        var uploadInst2 = upload.render({
            elem: '#test2'
            , url: storeHost + "/manage/beautician/uploadBeauticianImg"
            , auto: false
            , bindAction: '#startUp'
            , choose: function (obj) {
                //预读本地文件示例，不支持ie8
                obj.preview(function (index, file, result) {
                    $('#demo2').attr('src', result); //图片链接（base64）
                });
            }
            , done: function (res) {
                //如果上传失败
                if (res.code > 0) {
                    return layer.msg('上传失败');
                }
                //上传成功
                resultImgUrl = "http://" + res.result.imageUrl
                layer.msg('上传成功');
            }
            , error: function () {
                //演示失败状态，并实现重传
                var demoText2 = $('#demoText2');
                demoText2.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>');
                demoText2.find('.demo-reload').on('click', function () {
                    uploadInst2.upload();
                });
            }
        });
    });

</script>

<script>
    //数组合并并去重
    function concat(resultDataSelected, resultDataAllSearchSelected) {
        var length1 = resultDataSelected.length;
        var length2 = resultDataAllSearchSelected.length;
        for (var i = 0; i < length1; i++) {
            for (var j = 0; j < length2; j++) {
                //判断添加的数组是否为空了
                if (resultDataSelected.length > 0) {
                    if (resultDataSelected[i] == resultDataSelected[j]) {
                        resultDataSelected.splice(i, 1); //利用splice函数删除元素，从第i个位置，截取长度为1的元素
                        length1--;
                    }
                }
            }
        }
        for (var n = 0; n < resultDataAllSearchSelected.length; n++) {
            resultDataSelected.push(resultDataAllSearchSelected[n]);
        }
        return resultDataSelected;
    }

    //初始化子公司分组列表
    function loadSubCompanyStore(form) {
        var url = storeHost + "/manage/store/selectSubCompanyAndStoreNoPage";
        var data = {companyId: "${currentUser.companyId!}", companyType: "${currentUser.companyType!}"};
        $.post(url, data, function (result) {
            if (result.responseStatusType.message == "Success") {
                var list = result.result;    //返回的数据
                var server = document.getElementById("stores"); //server为select定义的id
                server.innerHTML = "<option value='0' selected='selected'>直接选择或搜索选择</option>";
                for (var p in list) {
                    var optgroup = document.createElement("optgroup");  // 创建添加optgroup属性
                    optgroup.setAttribute("label", list[p].subsidiaryName); // 给optgroup的label添加值
                    var storeVOList = list[p].storeVOList;
                    for (var n in storeVOList) {
                        var option = document.createElement("option");  // 创建添加option属性
                        option.setAttribute("value", storeVOList[n].storeId); // 给option的value添加值
                        option.innerText = storeVOList[n].name;     // 打印option对应的纯文本
                        optgroup.appendChild(option)
                    }
                    server.appendChild(optgroup);           //给select添加option子标签
                }
                form.render();
            } else {

            }
        })
    }
</script>

</body>
</html>